%label{for: '#ldap-group-select'} LDAP Group
%select.ldap-groups#ldap-group-select
  - @ldap_groups.each do |ldap_group|
    %option{value:ldap_group}= /CN=(.*?),/.match(ldap_group)[1]

%label{for: '#role-select'} Role
%select.role-select#role-select
  - @roles.each do |role|
    %option{value:role.name}= role.name

=button_tag 'Map', type: 'button', id: 'map_roles'

= form_tag '/add_user', remote: true do 
  .form-group
    = label_tag "email"
    = email_field_tag "email", nil, id: "sign_up_email"

  .form-group
    = label_tag "login"
    = text_field_tag "login", nil, id: "sign_up_username"
  
  .form-group
    = label_tag "password"
    = password_field_tag "password", nil, id: "sign_up_password"

  .form-group
    = label_tag "password_confirmation"
    = password_field_tag "password_confirmation", nil, id: "sign_up_confirm"

  = submit_tag

%ul#list_of_mappings
  %span.ldap-mapping-group= "LDAP"
  = icon('arrow-right')
  %span.ldap-mapped-role= "Role"
  - @ldap_role_mappings.each do |mapping|
    %li
      %span.ldap-mapping-group{mapping_id: mapping.id}= /CN=(.*?),/.match(mapping.ldap_group)[1]
      = icon('arrow-right')
      %span.ldap-mapped-role= mapping.role
      = button_tag 'Delete', type: 'button', class: 'delete_mapping'

%ul#list_of_users
  - @non_enova_users.each do |user|
    %li.hidden
      %span.user-email ajax_user_email
      - @roles.each do |role|
        = label_tag "#{role.name}-ajax_user_id", role.name
        = check_box_tag "#{role.name}-ajax_user_id", role.name, false, user: "ajax_user_email"
      = button_tag 'Delete', type: 'button', class: 'delete_user'
    %li
      %span.user-email= user.email
      - @roles.each do |role|
        = label_tag "#{role.name}-#{user.id}", role.name
        = check_box_tag "#{role.name}-#{user.id}", role.name, user.roles.include?(role), user: user.email
      = button_tag 'Delete', type: 'button', class: 'delete_user'
= button_tag 'Save', type: 'button', id: 'map_users'
