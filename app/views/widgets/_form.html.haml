= form_tag(widget_path, :method=>'patch') do
  - if @widget.errors.any?
    #error_explanation
      %h2= "#{pluralize(@widget.errors.count, "error")} prohibited this widget from being saved:"
      %ul
        - @widget.errors.full_messages.each do |msg|
          %li= msg

  .field.form-group
    = label_tag 'name'
    = text_field_tag 'widget[name]', @widget.name
  - if @widget.class == Table
    .field.form-group
      = label_tag 'query'
      = select_tag 'widget[query]', options_from_collection_for_select(Query.all, "id", "name", @widget.query.id)
  .field.form-group
    = label_tag 'height'
    = number_field_tag 'widget[height]', @widget.height
  .field.form-group
    = label_tag 'width'
    = number_field_tag 'widget[width]', @widget.width
  .field.form-group
    = label_tag 'page'
    = number_field_tag 'widget[page]', @widget.page
  .field.form-group
    = hidden_field_tag 'widget[type]', @widget.type
  %h3 Variables
  - if @widget.class == Table
    - @widget.query.variables.each do |variable, value|
      .field.form-group
        = label_tag variable.to_s
        = text_field_tag "variables[#{variable.to_s}]", value.to_s
  .actions
    = submit_tag 'Save', class: "btn btn-default"
